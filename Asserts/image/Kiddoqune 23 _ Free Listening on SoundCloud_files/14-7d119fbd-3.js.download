(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{2030:function(e,t,n){e.exports=new(n(15))({applyTo:function(e,t){var i=void 0===t?{}:t,o=i.clickObject,a=void 0===o?s:o,r=i.clickName,l=void 0===r?"click::ext_url":r;function c(e){n(12).trackV1Click({click_category:"navigation",click_object:a.call(this),click_name:l,click_target:e.target.href})}this.merge(e,{events:{'click a[href^="http://"]':c,'click a[href^="https://"]':c}})}});function s(){return this.model.getUrn()}},2044:function(e,t,n){e.exports=n(43).extend({defaults:{width:650,warnBeforeClosing:!0,stayOpenOnNavigate:!0,Subview:n(653),confirmCloseMessage:n(1).t("Your message has not been sent.\n\nAre you sure you want to leave this page?")},events:{'click a[href^="/"]':"onLinksClick"},setup:function(){n(43).prototype.setup.apply(this,arguments),this.listenTo(n(8),"new-message:sent",this.close)},canBeClosed:function(){var e=this.getContentView();return n(12).trackV0Click(["messages","overlay-clicked"]),!(!e||!e.form||e.form.get("body").trim())||n(43).prototype.canBeClosed.call(this)},onLinksClick:function(e){e.preventDefault(),e.stopPropagation()}})},2052:function(e,t,n){var s=["system"];e.exports=n(5).extend(n(32).withOptions("muteButton"),n(56),{className:"blockButton",defaults:{responsive:!1,showUserName:!1,showIcon:!1},buttonLabels:{default:function(){return this.options.showUserName?n(1).t("Block [[username]]",{username:this.user.get("username")}):n(1).t("Block")},selected:{text:function(){return this.options.showUserName?n(1).t("Blocked [[username]]",{username:this.user.get("username")}):n(1).t("Blocked")},title:function(){return this.options.showUserName?n(1).t("Unblock [[username]]",{username:this.user.get("username")}):n(1).t("Unblock")}}},ModelClass:n(424),modal:null,setup:function(e){var t=e.resource_id,i=e.showUserName,o=e.showIcon;this.$el.toggleClass("sc-button-block",o),this.user=this.addDataSource(new(n(30))({id:t}),{requiredAttributes:i?["username"]:[]}),this.observedAttributes=[t],s.indexOf(t)>-1&&this.$el.hide()},isButtonSelected:function(){return!!this.model.get(this.options.resource_id)},onClick:function(e){e.preventDefault(),this.isButtonSelected()?n(29).block(this.options.resource_id,!1,!1,!1,{context:this.getContextData()}):i.call(this)}});function i(){this.modal||(this.modal=new(n(43))({togglerEl:this.el,width:520,Subview:n(654),subviewArgs:{resource_id:this.options.resource_id}})),this.modal.open()}},2131:function(e,t,n){e.exports=n(5).extend(n(56),{defaults:{size:"medium",show_icon:!0},tagName:"a",buttonLabels:{default:{text:n(1).t("Message"),title:n(1).t("Send a message")}},attributes:{href:""},states:{icon:"sc-button-message"},ModelClass:n(30),modal:null,setup:function(e){this.toggleState("icon",e.show_icon)},onClick:function(e){e.preventDefault(),this.modal||(this.modal=new(n(2044))({togglerEl:this.el,subviewArgs:{resource_id:this.model?this.model.id:null}})),n(8).trigger("messages:write-new"),n(12).trackV0Click(["messages","write-new-clicked"]),this.modal.open()}})},2132:function(e,t,n){e.exports=n(5).extend(n(56),{className:"reportButton",defaults:{responsive:!1,showUserName:!1,showIcon:!1},buttonLabels:{default:function(){return this.options.showUserName?n(1).t("Report [[username]]",{username:this.model.get("username")}):n(1).t("Report")}},ModelClass:n(30),modal:null,setup:function(e){var t=e.showIcon;this.$el.toggleClass("sc-button-block",t)},onClick:function(e){e.preventDefault(),s.call(this)}});function s(){this.modal||(this.modal=new(n(43))({togglerEl:this.el,width:520,Subview:n(438),subviewArgs:{resource_id:this.options.resource_id}})),this.modal.open()}},2888:function(e,t,n){var s=n(10),i=n(2889);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(s(i,o),i.locals?i.locals:{});e.exports=a},2889:function(e,t,n){(t=n(11)(!1)).push([e.i,".l-messages-left{position:fixed;top:75px;bottom:0;width:350px;overflow:hidden}.l-messages-main{padding-left:380px}@media (max-width:1079px){.l-messages-left{width:270px}.l-messages-main{padding-left:300px}}",""]),e.exports=t},2890:function(e,t,n){var s=n(9);e.exports=(s.default||s).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,i){return'<div class="l-messages-left sc-border-box"></div>\n<div class="l-messages-top g-z-index-content"></div>\n<div class="l-messages-main"></div>\n'},useData:!0})},2891:function(e,t,n){e.exports=n(93).extend(n(661),{Subview:n(2892),defaults:{fullPageList:!1},css:n(2900),template:n(2902),className:"inbox g-box-full",itemClassName:"inbox__item",element2selector:{list:".inbox__list"},states:{"not-empty":function(e){this.$el.toggleClass("sc-border-light-right",e)}},setup:function(){var e=this.collection=new(n(436));e.setLimit(20),this.listenTo(e,"remove",a).listenTo(e,"new-conversations-added",this.rerender).listenTo(e,"change:last_message",this.rerender).listenTo(e,"change:currentConversationId",o),this.onKeyDown=c.bind(this),window.document.addEventListener("keydown",this.onKeyDown)},dispose:function(){window.document.removeEventListener("keydown",this.onKeyDown)},onAdd:function(e,t,s){n(93).prototype.onAdd.apply(this,arguments),s.userAction&&l(e.id),r.call(this,this.collection.getCurrentConversationId()),i.call(this)},renderDecorate:function(){n(93).prototype.renderDecorate.apply(this,arguments),this.listenTo(n(64),"resize:debounced",s),r.call(this,this.collection.getCurrentConversationId()),i.call(this)},getListContainer:function(){return this.getElement("list")}});function s(){this.disposed||this.updateScrollable(!0)}function i(){this.toggleState("not-empty",this.collection.length>0)}function o(e){r.call(this,e.currentConversationId)}function a(e,t,n){var s=this.collection.at(n.index-1),o=this.collection.at(n.index);l(s&&s.id||o&&o.id),i.call(this)}function r(e){this.getListItemViews().forEach((function(t){t.toggleActive(t.model.id===e)}))}function l(e){e&&n(3).get("router").navigateToRoute("messages",[e],{trigger:!0})}function c(e){if(e.altKey)switch(e.keyCode){case n(53).UP:u.call(this,-1),e.preventDefault();break;case n(53).DOWN:u.call(this,1),e.preventDefault()}}function u(e){var t=function(e,t){var s=function(e,t){return n(0).findIndex(e.models,(function(e){return e.id===t}))}(e,e.getCurrentConversationId());if(s>-1)return e.at(s+t)}(this.collection,e);t&&(l(t.id),d.call(this,t))}function d(e){var t=this.getListItemView(e);if(t){var n=t.$el.parent().height(),s=this.getScrollableWrapper().scrollTop(),i=this.getScrollableWrapper().height(),o=this.getListItemViews().indexOf(t)*n,a=o+n;o<s?this.getScrollableWrapper().scrollTop(o-10):a>s+i&&this.getScrollableWrapper().scrollTop(a-i+10)}}},2892:function(e,t,n){e.exports=n(5).extend({template:n(2893),css:n(2898),states:{unread:"unread",active:"active"},ModelClass:n(166),className:"inboxItem sc-border-box",requiredAttributes:["read"],attributes:{tabIndex:0},renderDecorate:function(){this.toggleState("unread",!this.model.get("read"))},toggleActive:function(e){this.toggleState("active",e)}})},2893:function(e,t,n){var s=n(9);e.exports=(s.default||s).template({compiler:[7,">= 4.0.0"],main:function(e,t,s,i,o){return e.escapeExpression((n(4)||t&&t.$view||s.helperMissing).call(null!=t?t:e.nullContext||{},n(2894),{name:"$view",hash:{resource_id:null!=t?t._resource_id:t},data:o}))+"\n"},useData:!0})},2894:function(e,t,n){e.exports=n(5).extend({template:n(2895),css:n(2896),className:"conversationBadge",ModelClass:n(166),events:{click:function(){n(3).get("router").navigateToRoute("messages",[this.model.id],{trigger:!0})}},getTemplateData:function(e){var t=this.model.isFromSoundCloud(),s=this.model.getRecipient();return n(0).assign(e,{from:s,isFromSoundCloud:t,shouldBodyBeEscaped:!t,missingUser:"missing_user"===s.kind})}})},2895:function(e,t,n){var s=n(9);e.exports=(s.default||s).template({1:function(e,t,s,i,o){return'    <img class="conversationBadge__imageDeleted" src="'+n(665)+'" alt="" width="100%" height="100%"/>\n'},3:function(e,t,s,i,o){var a;return"    "+e.escapeExpression((n(4)||t&&t.$view||s.helperMissing).call(null!=t?t:e.nullContext||{},n(241),{name:"$view",hash:{is_link:!1,size:"small",resource_id:null!=(a=null!=t?t.from:t)?a.id:a},data:o}))+"\n"},5:function(e,t,n,s,i){return"        SoundCloud\n"},7:function(e,t,n,s,i){var o;return null!=(o=n.if.call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.from:t)?o.username:o,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))?o:""},8:function(e,t,n,s,i){var o;return"        "+e.escapeExpression(e.lambda(null!=(o=null!=t?t.from:t)?o.username:o,t))+"\n      "},10:function(e,t,s,i,o){return'\n        <span class="conversationBadge__missingUsername">'+e.escapeExpression((n(2)||t&&t.$t||s.helperMissing).call(null!=t?t:e.nullContext||{},"Deleted user",{name:"$t",hash:{},data:o}))+"</span>\n      "},compiler:[7,">= 4.0.0"],main:function(e,t,s,i,o){var a,r=null!=t?t:e.nullContext||{},l=s.helperMissing,c=e.escapeExpression;return'<div class="conversationBadge__image">\n'+(null!=(a=s.if.call(r,null!=t?t.missingUser:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o}))?a:"")+'</div>\n<div class="conversationBadge__content">\n  <div class="conversationBadge__top">\n    <h3 class="conversationBadge__senderName sc-truncate">\n'+(null!=(a=s.if.call(r,null!=t?t.isFromSoundCloud:t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.program(7,o,0),data:o}))?a:"")+'    </h3>\n    <div class="conversationBadge__time sc-font-light">\n      '+c((n(4)||t&&t.$view||l).call(r,n(239),{name:"$view",hash:{timestamp:null!=(a=null!=t?t.last_message:t)?a.sent_at:a},data:o}))+'\n    </div>\n  </div>\n  <div class="conversationBadge__body sc-truncate">\n    '+c((n(1972)||t&&t.$usertext||l).call(r,null!=(a=null!=t?t.last_message:t)?a.content:a,{name:"$usertext",hash:{escapeExpression:null!=t?t.shouldBodyBeEscaped:t,paragraphs:!1,links:!1},data:o}))+"\n  </div>\n</div>\n"},useData:!0})},2896:function(e,t,n){var s=n(10),i=n(2897);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(s(i,o),i.locals?i.locals:{});e.exports=a},2897:function(e,t,n){(t=n(11)(!1)).push([e.i,".conversationBadge{cursor:pointer;display:-webkit-flex;display:flex;padding:10px}.conversationBadge__image{margin-right:10px}.conversationBadge__imageDeleted{border:1px solid rgba(0,0,0,.1);border-radius:50%;box-sizing:border-box;overflow:hidden}.conversationBadge__content{-webkit-flex:1;flex:1;overflow:hidden}.conversationBadge__top{display:-webkit-flex;display:flex;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:baseline;align-items:baseline;margin-top:3px;margin-bottom:2px}.conversationBadge__senderName{-webkit-flex:1;flex:1;margin-right:10px}.conversationBadge__missingUsername{color:#999}.conversationBadge>.loading{background:none;padding:0}.conversationBadge__time{font-size:12px;color:#999}.conversationBadge .sc-button{margin-top:5px}",""]),e.exports=t},2898:function(e,t,n){var s=n(10),i=n(2899);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(s(i,o),i.locals?i.locals:{});e.exports=a},2899:function(e,t,n){(t=n(11)(!1)).push([e.i,".inboxItem{border-left:2px solid transparent}.inboxItem.active,.inboxItem.unread,.inboxItem:focus,.inboxItem:hover{background-color:#f2f2f2}.inboxItem:focus{outline:0}.inboxItem.unread{border-left-color:#333}.inboxItem.active{border-left-color:#f50}",""]),e.exports=t},2900:function(e,t,n){var s=n(10),i=n(2901);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(s(i,o),i.locals?i.locals:{});e.exports=a},2901:function(e,t,n){(t=n(11)(!1)).push([e.i,'.inbox .send-message-button{margin-top:24px}.inbox__listWrapper{position:absolute;top:134px;left:0;right:0;bottom:45px}.inbox .loading{padding:5px 0 42px}.inbox__item{position:relative}.inbox{width:99%}.inbox__item:before{content:" ";display:block;height:1px;width:320px;background-color:#f2f2f2}.messageGroupTitle+.inbox__item:before{height:0}.inbox__listWrapper ul{margin-bottom:17px}',""]),e.exports=t},2902:function(e,t,n){var s=n(9);e.exports=(s.default||s).template({compiler:[7,">= 4.0.0"],main:function(e,t,s,i,o){var a=null!=t?t:e.nullContext||{},r=s.helperMissing,l=e.escapeExpression;return"<h1>"+l((n(2)||t&&t.$t||r).call(a,"Messages",{name:"$t",hash:{},data:o}))+"</h1>\n"+l((n(4)||t&&t.$view||r).call(a,n(2131),{name:"$view",hash:{show_icon:!1,className:"sc-button-cta send-message-button",text:(n(2)||t&&t.$t||r).call(a,"New message",{name:"$t",hash:{},data:o})},data:o}))+'\n<div class="inbox__listWrapper">\n  <div class="inbox__list g-box-full"></div>\n</div>\n'},useData:!0})},2903:function(e,t,n){e.exports=n(5).extend({template:n(2904),css:n(2922),ModelClass:n(166),className:"conversation",states:{error:function(e){e&&(this.teardown(),this.$el.html(n(2924)()))}},element2selector:{form:".conversation__form"},requiredAttributes:["users"],setup:function(){this.form=new(n(192))({id:n(0).uniqueId("new-message-")},{conversationId:this.model.id}),this.listenTo(this.model,"error",s)},dispose:function(){this.form.release()},getTemplateData:function(e){var t=this.model,s=t.getRecipient(),i="missing_user"===s.kind;return n(0).assign(e,{formId:this.form.id,showForm:i||!t.isFromSoundCloud(),recipient_id:s.id,missingUser:i})}});function s(){this.hasData()||this.toggleState("error",!0)}},2904:function(e,t,n){var s=n(9);e.exports=(s.default||s).template({1:function(e,t,s,i,o){return'  <div class="conversation__form sc-border-box">\n    '+e.escapeExpression((n(4)||t&&t.$view||s.helperMissing).call(null!=t?t:e.nullContext||{},n(653),{name:"$view",hash:{showRecipientField:!1,showTitle:!1,showSuccessMessage:!1,formId:null!=t?t.formId:t,resource_id:null!=t?t.recipient_id:t},data:o}))+"\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,i,o){var a,r=null!=t?t:e.nullContext||{},l=s.helperMissing,c=e.escapeExpression;return'<div class="conversation__actions sc-border-box g-z-index-content">\n  '+c((n(4)||t&&t.$view||l).call(r,n(2905),{name:"$view",hash:{missingUser:null!=t?t.missingUser:t,key:"actions",resource_id:null!=t?t.id:t},data:o}))+'\n</div>\n<div class="conversation__messages">\n  '+c((n(4)||t&&t.$view||l).call(r,n(2915),{name:"$view",hash:{key:"messages",resource_id:null!=t?t.id:t},data:o}))+"\n</div>\n"+(null!=(a=s.if.call(r,null!=t?t.showForm:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?a:"")},useData:!0})},2905:function(e,t,n){e.exports=n(5).extend({className:"conversationActions g-flex-row-centered-spread",template:n(2906),css:n(2913),ModelClass:n(166),defaults:{missingUser:!1},getTemplateData:function(e){return e.recipientId=this.model.getRecipient().id,e.isFromSoundCloud=this.model.isFromSoundCloud(),e}})},2906:function(e,t,n){var s=n(9);e.exports=(s.default||s).template({1:function(e,t,s,i,o){return'    <div class="sc-type-h3 conversationActions__missingUser">'+e.escapeExpression((n(2)||t&&t.$t||s.helperMissing).call(null!=t?t:e.nullContext||{},"Deleted user",{name:"$t",hash:{},data:o}))+"</div>\n"},3:function(e,t,s,i,o){var a,r=null!=t?t:e.nullContext||{};return"    "+e.escapeExpression((n(4)||t&&t.$view||s.helperMissing).call(r,n(2907),{name:"$view",hash:{resource_id:null!=t?t.recipientId:t},data:o}))+"\n"+(null!=(a=s.unless.call(r,null!=t?t.isFromSoundCloud:t,{name:"unless",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o}))?a:"")},4:function(e,t,s,i,o){var a=null!=t?t:e.nullContext||{},r=s.helperMissing,l=e.escapeExpression;return'      <div class="conversationActions__userActions sc-button-group">\n        '+l((n(4)||t&&t.$view||r).call(a,n(2052),{name:"$view",hash:{resource_id:null!=t?t.recipientId:t},data:o}))+"\n        "+l((n(4)||t&&t.$view||r).call(a,n(2132),{name:"$view",hash:{resource_id:null!=t?t.recipientId:t},data:o}))+"\n      </div>\n"},6:function(e,t,s,i,o){var a;return"    "+e.escapeExpression((n(4)||t&&t.$view||s.helperMissing).call(null!=t?t:e.nullContext||{},n(2910),{name:"$view",hash:{size:null!=(a=null!=t?t._options:t)?a.size:a,resource_type:null!=t?t._resource_type:t,resource_id:null!=t?t._resource_id:t},data:o}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,i,o){var a,r=null!=t?t:e.nullContext||{};return'<div class="conversationActions__user g-flex-row-centered sc-truncate">\n'+(null!=(a=s.if.call(r,null!=(a=null!=t?t._options:t)?a.missingUser:a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o}))?a:"")+'</div>\n<div class="sc-button-group conversationActions__buttons">\n  '+e.escapeExpression((n(4)||t&&t.$view||s.helperMissing).call(r,n(2912),{name:"$view",hash:{size:null!=(a=null!=t?t._options:t)?a.size:a,resource_type:null!=t?t._resource_type:t,resource_id:null!=t?t._resource_id:t},data:o}))+"\n"+(null!=(a=s.unless.call(r,null!=t?t.isFromSoundCloud:t,{name:"unless",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o}))?a:"")+"</div>\n"},useData:!0})},2907:function(e,t,n){e.exports=n(5).extend({className:"conversationParticipant sc-truncate sc-type-h3",css:n(2908),ModelClass:n(30),requiredAttributes:["username"],template:function(){return n(9).Utils.escapeExpression(this.model.get("username"))}})},2908:function(e,t,n){var s=n(10),i=n(2909);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(s(i,o),i.locals?i.locals:{});e.exports=a},2909:function(e,t,n){(t=n(11)(!1)).push([e.i,".conversationParticipant{font-size:24px}",""]),e.exports=t},2910:function(e,t,n){e.exports=n(94).extend({className:"sc-button-delete",ModelClass:n(166),defaults:{icon_only:!0,ContentViewClass:n(2911),overlayType:"dialog",overlayOptions:{relativeElementAnchor:"center bottom",anchor:"right top",offset:"18 7",width:"220px"}},buttonLabels:{default:n(1).t("Archive this conversation")}})},2911:function(e,t,n){(function(t){e.exports=n(311).extend({ModelClass:n(166),defaults:{confirmButton:n(1).t("Archive"),confirmText:n(1).t("Are you sure?<br> Archiving a conversation removes it from your messages and will be restored if you contact this user again.<br>")},element2selector:{actions:".confirmableForm__actions",text:".confirmableForm__text"},renderDecorate:function(){var e,s;this.model.isFromMissingUser()||(s=t(window.document.createElement("input")).attr({name:"isSpam",type:"checkbox"}).css("margin-right","2px"),e=t(window.document.createElement("label")).addClass("sc-text-light").append(s).append(n(1).t("Also report conversation as spam").toString()),this.getElement("text").append(e))},onSubmit:function(e){var t=e.isSpam&&e.isSpam.checked;this.model.destroyAndReport(t)}})}).call(this,n(14))},2912:function(e,t,n){var s=n(1).t("Mark as read"),i=n(1).t("Mark as unread");e.exports=n(5).extend(n(56),{ModelClass:n(166),observedAttributes:["read"],defaults:{allPossibleLabels:[i,s]},buttonLabels:{default:function(){return this.model.get("read")?i:s}},onClick:function(e){e.preventDefault(),this.model[this.model.get("read")?"markAsUnread":"markAsRead"]()}})},2913:function(e,t,n){var s=n(10),i=n(2914);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(s(i,o),i.locals?i.locals:{});e.exports=a},2914:function(e,t,n){(t=n(11)(!1)).push([e.i,".conversationActions__user{-webkit-flex:1;flex:1;margin-right:15px}.conversationActions__userActions{margin-left:5px}.conversationActions__buttons,.conversationActions__userActions{-webkit-flex-shrink:0;flex-shrink:0}.conversationActions__missingUser{font-size:24px}",""]),e.exports=t},2915:function(e,t,n){e.exports=n(93).extend(n(236),n(237),{css:n(2916),className:"conversationMessages",itemClassName:"conversationMessages__item sc-clearfix",Subview:n(2918),firstRender:!0,toScrollPixels:0,defaults:{inverted:!0,fullPageList:!0},setup:function(){var e=n(166).instances.get(this.options.resource_id);this.collection=new(n(687))(null,{resource_id:this.options.resource_id}),this.collection.setLimit(10),e&&this.whenInserted().done(e.markAsRead.bind(e)).done(i.bind(this)),this.listenTo(n(8),"new-unread-messages",s).listenTo(n(8),"new-message:sent",i)},renderDecorate:function(){window.scrollTo(0,0),n(93).prototype.renderDecorate.apply(this,arguments),i.call(this)},onAdd:function(e,t,s){n(93).prototype.onAdd.call(this,e,t,s),this.toScrollPixels+=this.getListItemView(e).getHeight(),e===this.collection.last()&&(this.scrollContainerToPositionOrBottom(this.toScrollPixels+this.options.preloadAt),this.toScrollPixels=0)},getQueueSource:function(){return this.collection.getAttachments()}});function s(e){e.some((function(e){if(e===this.options.resource_id)return this.collection.fetchUnread(),!0}),this)}function i(){this.scrollContainerToPositionOrBottom()}},2916:function(e,t,n){var s=n(10),i=n(2917);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(s(i,o),i.locals?i.locals:{});e.exports=a},2917:function(e,t,n){(t=n(11)(!1)).push([e.i,".conversationMessages>.loading{padding:50px 0}.conversationMessages__item{margin-bottom:9px}",""]),e.exports=t},2918:function(e,t,n){(function(t){var s="conversationMessage__scLinkPlaceholder";e.exports=n(5).extend(n(2030).withOptions({clickObject:function(){return this.model.get("conversation_id")}}),{ModelClass:n(451),template:n(2919),css:n(2920),className:"conversationMessage sc-media",requiredAttributes:["content","conversation_id","sender_urn","sent_at"],element2selector:{body:".conversationMessage__body",topLevelLinks:".conversationMessage__body p > a",wrapperDivs:".conversationMessage__body ."+s,wrappedLinks:".conversationMessage__body ."+s+" > a"},setup:function(){this.listenTo(this.model,"audibleInformationUpdated",o).listenTo(this.model,"audibleFinishedResolving",l)},renderDecorate:function(){r.call(this),this.model.get("audibleInformation").length?i.call(this):this.model.fetchAudibles()},getTemplateData:function(e){var t,s,i,o=n(3).get("me"),a=this.model.getSenderId(),r=n(30).instances.get(a);return n(0).assign(e,{is_me:o.id===a,sender:r&&r.toJSON(),missingUser:this.model.isFromMissingUser(),usertext:(t=this.model,s=t.isFromSoundCloud(),i=s&&/<[a-z]+/i.test(t.get("content")),{links:!t.isFromMissingUser(),paragraphs:!i,escapeExpression:!s,whitelist:i?["b","em","li","ol","strong","ul"]:null})})},getHeight:function(){return this.$el.outerHeight(!0)}});function i(){this.model.get("audibleInformation").forEach((function(e){o.call(this,{audibleInformation:e})}),this)}function o(e){var s,i=this,o=e.audibleInformation.model;o&&(s=n(21).parse(e.audibleInformation.link).path,this.getElement("wrappedLinks").each((function(e,n){var r=n.href;r&&-1!==r.indexOf(s)&&a.call(i,t(n),o)})))}function a(e,i){var o=t(window.document.createElement("div")).addClass("conversationMessage__sound"),a=new(n(297))({resource_id:i.resource_id,resource_type:i.resource_type,hide_comments:!0}),r=e.parent("div");this.addSubview(a),o.append(a.render().$el),r.append(o).removeClass(s),e.remove()}function r(){this.getElement("topLevelLinks").each((function(e,i){var o,a,r=t(i),l=r.text();n(95).soundcloudUrlRegex.test(l)&&(o=n(95).filterAudibleLinks([l])).length&&o[0].info.name&&(a=t(window.document.createElement("div")).addClass("listen"===o[0].info.name?"conversationMessage__soundPlaceholder":"conversationMessage__playlistPlaceholder").addClass(s),r.wrap(a))}))}function l(){this.getElement("wrapperDivs").removeClass(s)}}).call(this,n(14))},2919:function(e,t,n){var s=n(9);e.exports=(s.default||s).template({1:function(e,t,s,i,o){return'    <img class="conversationMessage__imgDeleted" src="'+n(665)+'" alt="" width="40" height="40"/>\n'},3:function(e,t,s,i,o){var a;return"    "+e.escapeExpression((n(4)||t&&t.$view||s.helperMissing).call(null!=t?t:e.nullContext||{},n(241),{name:"$view",hash:{resource_id:null!=(a=null!=t?t.sender:t)?a.id:a},data:o}))+"\n"},5:function(e,t,s,i,o){return"      "+e.escapeExpression((n(2)||t&&t.$t||s.helperMissing).call(null!=t?t:e.nullContext||{},"Me",{name:"$t",hash:{},data:o}))+"\n"},7:function(e,t,n,s,i){var o;return null!=(o=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.missingUser:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))?o:""},8:function(e,t,s,i,o){return'        <span class="sc-type-h3">'+e.escapeExpression((n(2)||t&&t.$t||s.helperMissing).call(null!=t?t:e.nullContext||{},"Deleted user",{name:"$t",hash:{},data:o}))+"</span>\n"},10:function(e,t,s,i,o){var a,r=e.escapeExpression;return'        <a href="'+r((n(17)||t&&t.$route||s.helperMissing).call(null!=t?t:e.nullContext||{},"user",null!=t?t.sender:t,{name:"$route",hash:{},data:o}))+'" class="sc-link-dark">'+r(e.lambda(null!=(a=null!=t?t.sender:t)?a.username:a,t))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,i,o){var a,r=null!=t?t:e.nullContext||{},l=s.helperMissing,c=e.escapeExpression;return'<div class="conversationMessage__img sc-media-image">\n'+(null!=(a=s.if.call(r,null!=t?t.missingUser:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o}))?a:"")+'</div>\n<div class="conversationMessage__time sc-font-light">'+c((n(4)||t&&t.$view||l).call(r,n(239),{name:"$view",hash:{prefix:"Sent",timestamp:null!=t?t.sent_at:t},data:o}))+'</div>\n<div class="sc-media-content">\n  <div class="conversationMessage__from sc-type-h3 sc-truncate" >\n'+(null!=(a=s.if.call(r,null!=t?t.is_me:t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.program(7,o,0),data:o}))?a:"")+'  </div>\n  <div class="conversationMessage__body sc-type-small">\n    '+c((n(1972)||t&&t.$usertext||l).call(r,null!=t?t.content:t,{name:"$usertext",hash:{paragraphs:null!=(a=null!=t?t.usertext:t)?a.paragraphs:a,whitelist:null!=(a=null!=t?t.usertext:t)?a.whitelist:a,escapeExpression:null!=(a=null!=t?t.usertext:t)?a.escapeExpression:a,links:null!=(a=null!=t?t.usertext:t)?a.links:a},data:o}))+"\n  </div>\n</div>\n"},useData:!0})},2920:function(e,t,n){var s=n(10),i=n(2921);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(s(i,o),i.locals?i.locals:{});e.exports=a},2921:function(e,t,n){var s=n(11),i=n(28),o=n(253);t=s(!1);var a=i(o);t.push([e.i,".conversationMessage{position:relative}.conversationMessage__from{margin-right:70px;padding-top:1px}.conversationMessage__img{margin-right:15px}.conversationMessage__imgDeleted{border:1px solid rgba(0,0,0,.1);border-radius:50%;box-sizing:border-box;overflow:hidden}.conversationMessage__time{position:absolute;top:0;right:0;color:#999}.conversationMessage__body{padding-top:7px;color:#666;word-wrap:break-word}.conversationMessage__playerLink,.conversationMessage__playerLink:hover,.conversationMessage__playerLink:visited{display:block;height:101px;color:transparent}.conversationMessage__playerLink.loading{padding:20px 0;background-size:16px}.conversationMessage__sound{margin-bottom:12px}.conversationMessage__body p:empty{margin:0}.conversationMessage__scLinkPlaceholder{background:transparent url("+a+") no-repeat center 20%}.conversationMessage__scLinkPlaceholder.conversationMessage__soundPlaceholder{height:156px}.conversationMessage__scLinkPlaceholder.conversationMessage__playlistPlaceholder{height:350px}",""]),e.exports=t},2922:function(e,t,n){var s=n(10),i=n(2923);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(s(i,o),i.locals?i.locals:{});e.exports=a},2923:function(e,t,n){(t=n(11)(!1)).push([e.i,".conversation{position:relative}.conversation__messages{padding-top:100px}.conversation__actions{position:fixed;width:830px;height:95px;background:#fff;box-shadow:0 1px 0 #fff;padding-top:38px;padding-left:30px;margin-left:-30px}.conversation__form{border-top:1px dashed #e5e5e5;padding:10px 0 0 55px}.noSuchConversation__body{margin-top:150px;margin-left:200px}@media (max-width:1239px){.conversation__actions{width:670px}}@media (max-width:1079px){.conversation__actions{width:650px}}",""]),e.exports=t},2924:function(e,t,n){var s=n(9);e.exports=(s.default||s).template({compiler:[7,">= 4.0.0"],main:function(e,t,s,i,o){return'<div class="noSuchConversation__body">\n  <h2>'+e.escapeExpression((n(2)||t&&t.$t||s.helperMissing).call(null!=t?t:e.nullContext||{},"This conversation cannot be found",{name:"$t",hash:{},data:o}))+"</h2>\n</div>\n"},useData:!0})},2925:function(e,t,n){e.exports=n(5).extend({className:"noConversations",events:{"click .noConversations__writeOne":"onClick"},template:n(2926),css:n(2928),modal:null,onClick:function(e){e.preventDefault(),this.modal||(this.modal=new(n(2044))({subviewArgs:{resource_id:this.model?this.model.id:null}})),this.modal.open()}})},2926:function(e,t,n){var s=n(9);e.exports=(s.default||s).template({1:function(e,t,n,s,i){return'      Send someone a message and make their day. <button type="button" class="noConversations__writeOne sc-button-nostyle sc-text-link">Write one</button>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,i,o){var a,r,l,c=null!=t?t:e.nullContext||{},u=s.helperMissing,d='<img width="252" height="294" class="noConversations__image" src="'+n(2927)+'" />\n\n<div class="noConversations__body">\n  <h2>'+e.escapeExpression((n(2)||t&&t.$t||u).call(c,"You have no messages",{name:"$t",hash:{},data:o}))+"</h2>\n  <p>\n";return r=null!=(r=n(2)||(null!=t?t.$t:t))?r:u,l={name:"$t",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o},a="function"==typeof r?r.call(c,l):r,n(2)||(a=s.blockHelperMissing.call(t,a,l)),null!=a&&(d+=a),d+"  </p>\n</div>\n"},useData:!0})},2927:function(e,t,n){e.exports=n.p+"assets/images/empty-19aff63b.png"},2928:function(e,t,n){var s=n(10),i=n(2929);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(s(i,o),i.locals?i.locals:{});e.exports=a},2929:function(e,t,n){(t=n(11)(!1)).push([e.i,".noConversations{margin-top:150px;margin-left:200px}.noConversations__image{margin-left:50px}.noConversations__body{display:inline-block;text-align:center;margin-top:20px}.noConversations__writeOne{cursor:pointer}",""]),e.exports=t},745:function(e,t,n){var s;e.exports=n(410).extend({css:n(2888),template:n(2890),tracking:{pageName:"messages:main"},notificationType:null,conversationId:null,initialize:function(){s=new(n(436)),n(410).prototype.initialize.apply(this,arguments)},dispose:function(){this.notificationType.setDefaultPolling()},setup:function(e){var t,i=this,o=n(7).defer();return t=function(e,t){var o={"l-messages-left":[n(2891)]};return e?o["l-messages-main"]=[n(2903),{resource_id:e}]:(o["l-messages-main"]=[n(2925)],t=!1),t&&n(3).get("router").navigateToRoute("messages",[e],{trigger:!1,replace:!0}),s.setCurrentConversationId(e),i.setViews(o)},this.setTitle(n(1).t("Messages")),this.notificationType=n(123).unreadConversations,window.setTimeout(this.notificationType.enableRealTimePolling.bind(this.notificationType),2e3),e.conversationId?t(e.conversationId):s.isPopulated()?t(s.at(0)?s.at(0).id:null,!0):(s.fetch({reset:!0}).done((function(){t(s.at(0)?s.at(0).id:null,!0).done(o.resolve).fail(o.reject)})),o)}})}}]);
//# sourceMappingURL=http://ent/web-sourcemaps/14-7d119fbd-3.js.map